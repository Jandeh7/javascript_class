<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Class Wednesday</title>
</head>
<body>
    <main>
        <div>
            <h3>SIGN IN</h3>
            <form action="" method="">
                <input type="text" id="username"><br>
                <input type="password" id="password"><br>
                <button onclick="findUsername()">Sign In</button>
            </form>
        </div>
        
        <div>
            <h3>SIGN UP</h3>
            <form action="" method="">
                <input type="text" id="name" value="" placeholder="Your full name">
                <input type="text" id="email" placeholder="Your email">
                <input type="text" id="phone" placeholder="Your phone">
                <input type="file" id="pics" accept="image/*" placeholder="Your profile picture">
                
                <input type="text" id="uUsername" placeholder="Username"><br>
                <input type="password" id="uPassword" placeholder="Password"><br>
                <input type="password" id="cPassword" placeholder="Confirm password"><br>
                <button onclick="addNewUser()">Sign Up</button>
            </form>
        </div>
        <div id="my-content"></div>
    </main>

    <script>
       
       let users = JSON.parse(localStorage.getItem("internalUsers"));
       if (users == null) {
           users = []
       }

       function addNewUser () {
           password = document.getElementById("uPassword").value
           cpassword = document.getElementById("cPassword").value
           if(password === cpassword) {
               profilePic = document.getElementById("pics").value
               newUser =
               {
                   name : document.getElementById("name").value,
                   email : document.getElementById("email").value,
                   phone : document.getElementById("phone").value,
                //    pics : document.getElementById("pics").value,
                   pics : profilePic.split("\\")[2],
                   username : document.getElementById("uUsername").value,
                   password : document.getElementById("uPassword").value
               }
            //    alert(newUser.pics.split("\\") [2]);

               users.push(newUser)
               localStorage.setItem("internalUsers", JSON.stringify(users));
           } else {
               alert("Password does not match")
           }
       }

        function findUsername() {
            userExist = users.find(checkName)

            if (userExist == undefined) {
                alert("Record not found")
            } else {
                window.location.assign = '/week7_exercise01/index.html'
            }
        }

        function checkName(object){
            return object.password == document.getElementById("password").value;
        }
    </script>
</body>
</html>